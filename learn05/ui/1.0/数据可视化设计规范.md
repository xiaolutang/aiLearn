# 智能教学助手数据可视化设计规范

## 1. 数据可视化概述

### 1.1 设计理念

#### 清晰性原则
- **信息层次**：突出重要数据，弱化次要信息
- **视觉引导**：使用颜色、大小、位置引导用户注意力
- **简洁明了**：避免不必要的装饰元素
- **一致性**：保持图表样式和交互的一致性

#### 教育导向
- **学习分析**：专注于学习效果和进步趋势
- **行为洞察**：揭示学习行为模式和问题
- **决策支持**：为教学决策提供数据支撑
- **个性化展示**：根据用户角色定制数据视图

### 1.2 目标用户

#### 教师用户
- **关注点**：班级整体表现、学生个体差异、教学效果
- **使用场景**：课前分析、课后总结、家长沟通
- **数据需求**：成绩分布、知识点掌握、学习趋势

#### 学生用户
- **关注点**：个人成绩、学习进度、薄弱环节
- **使用场景**：自我评估、学习规划、目标设定
- **数据需求**：个人趋势、同伴对比、能力雷达

#### 家长用户
- **关注点**：孩子表现、学习状态、发展趋势
- **使用场景**：了解进度、配合教学、家庭辅导
- **数据需求**：成绩变化、学习时长、行为分析

## 2. 色彩系统

### 2.1 数据色彩

#### 主色调
```scss
// 品牌主色
$primary-blue: #1890ff;
$primary-blue-light: #40a9ff;
$primary-blue-dark: #096dd9;

// 成功色（优秀、正向）
$success-green: #52c41a;
$success-green-light: #73d13d;
$success-green-dark: #389e0d;

// 警告色（需要关注）
$warning-orange: #fa8c16;
$warning-orange-light: #ffa940;
$warning-orange-dark: #d46b08;

// 错误色（问题、负向）
$error-red: #ff4d4f;
$error-red-light: #ff7875;
$error-red-dark: #cf1322;
```

#### 数据分类色彩
```scss
// 分类色板（最多8个类别）
$category-colors: (
  #1890ff, // 蓝色
  #52c41a, // 绿色
  #fa8c16, // 橙色
  #eb2f96, // 粉色
  #722ed1, // 紫色
  #13c2c2, // 青色
  #fadb14, // 黄色
  #f5222d  // 红色
);

// 渐变色板（连续数据）
$gradient-colors: (
  low: #e6f7ff,    // 浅蓝
  medium: #69c0ff, // 中蓝
  high: #1890ff,   // 深蓝
  highest: #0050b3 // 最深蓝
);
```

#### 语义化色彩
```scss
// 成绩等级色彩
$grade-colors: (
  excellent: #52c41a, // 优秀 - 绿色
  good: #1890ff,      // 良好 - 蓝色
  average: #fa8c16,   // 一般 - 橙色
  poor: #ff4d4f       // 较差 - 红色
);

// 趋势色彩
$trend-colors: (
  up: #52c41a,        // 上升 - 绿色
  stable: #1890ff,    // 稳定 - 蓝色
  down: #ff4d4f       // 下降 - 红色
);

// 学科色彩
$subject-colors: (
  chinese: #eb2f96,   // 语文 - 粉色
  math: #1890ff,      // 数学 - 蓝色
  english: #52c41a,   // 英语 - 绿色
  physics: #722ed1,   // 物理 - 紫色
  chemistry: #fa8c16, // 化学 - 橙色
  biology: #13c2c2    // 生物 - 青色
);
```

### 2.2 色彩使用规范

#### 对比度要求
- **文字对比度**：至少4.5:1（WCAG AA标准）
- **图形对比度**：至少3:1
- **背景对比度**：确保数据清晰可读

#### 色盲友好
```scss
// 色盲友好色板
$colorblind-safe: (
  blue: #0173b2,
  orange: #de8f05,
  green: #029e73,
  red: #cc78bc,
  brown: #ca9161,
  pink: #fbafe4,
  gray: #949494,
  yellow: #ece133
);
```

## 3. 图表类型规范

### 3.1 柱状图（Bar Chart）

#### 使用场景
- **成绩分布**：展示不同分数段的学生数量
- **学科对比**：比较不同学科的平均分
- **班级对比**：比较不同班级的表现
- **时间对比**：比较不同时期的数据

#### 设计规范
```scss
.bar-chart {
  // 柱子样式
  .bar {
    fill: $primary-blue;
    stroke: none;
    border-radius: 4px 4px 0 0;
    
    &:hover {
      fill: $primary-blue-dark;
      cursor: pointer;
    }
    
    &.highlighted {
      fill: $warning-orange;
    }
  }
  
  // 坐标轴
  .axis {
    .domain {
      stroke: #d9d9d9;
      stroke-width: 1px;
    }
    
    .tick {
      line {
        stroke: #d9d9d9;
        stroke-width: 1px;
      }
      
      text {
        fill: #666;
        font-size: 12px;
      }
    }
  }
  
  // 网格线
  .grid {
    .tick line {
      stroke: #f0f0f0;
      stroke-width: 1px;
      stroke-dasharray: 2,2;
    }
  }
}
```

#### 数据标签
```javascript
// 柱状图配置
const barChartConfig = {
  // 基础配置
  type: 'bar',
  responsive: true,
  maintainAspectRatio: false,
  
  // 数据配置
  data: {
    labels: ['语文', '数学', '英语', '物理', '化学'],
    datasets: [{
      label: '平均分',
      data: [85, 92, 78, 88, 90],
      backgroundColor: '#1890ff',
      borderRadius: 4,
      maxBarThickness: 60
    }]
  },
  
  // 选项配置
  options: {
    plugins: {
      legend: {
        display: false
      },
      tooltip: {
        backgroundColor: 'rgba(0,0,0,0.8)',
        titleColor: '#fff',
        bodyColor: '#fff',
        borderColor: '#1890ff',
        borderWidth: 1,
        cornerRadius: 6,
        displayColors: false,
        callbacks: {
          label: function(context) {
            return `平均分: ${context.parsed.y}分`;
          }
        }
      }
    },
    scales: {
      y: {
        beginAtZero: true,
        max: 100,
        grid: {
          color: '#f0f0f0',
          drawBorder: false
        },
        ticks: {
          color: '#666',
          font: {
            size: 12
          }
        }
      },
      x: {
        grid: {
          display: false
        },
        ticks: {
          color: '#666',
          font: {
            size: 12
          }
        }
      }
    }
  }
};
```

### 3.2 折线图（Line Chart）

#### 使用场景
- **成绩趋势**：展示学生成绩随时间的变化
- **学习进度**：显示知识点掌握的进展
- **班级表现**：追踪班级整体表现趋势
- **对比分析**：多个对象的趋势对比

#### 设计规范
```scss
.line-chart {
  // 线条样式
  .line {
    fill: none;
    stroke: $primary-blue;
    stroke-width: 2px;
    stroke-linecap: round;
    stroke-linejoin: round;
    
    &.trend-up {
      stroke: $success-green;
    }
    
    &.trend-down {
      stroke: $error-red;
    }
  }
  
  // 数据点
  .dot {
    fill: $primary-blue;
    stroke: #fff;
    stroke-width: 2px;
    r: 4px;
    
    &:hover {
      r: 6px;
      cursor: pointer;
    }
  }
  
  // 面积填充
  .area {
    fill: rgba(24, 144, 255, 0.1);
  }
}
```

#### 多线对比
```javascript
// 多线图配置
const multiLineConfig = {
  type: 'line',
  data: {
    labels: ['第1次', '第2次', '第3次', '第4次', '第5次'],
    datasets: [
      {
        label: '张三',
        data: [75, 82, 78, 85, 88],
        borderColor: '#1890ff',
        backgroundColor: 'rgba(24, 144, 255, 0.1)',
        tension: 0.4
      },
      {
        label: '李四',
        data: [68, 72, 75, 79, 82],
        borderColor: '#52c41a',
        backgroundColor: 'rgba(82, 196, 26, 0.1)',
        tension: 0.4
      },
      {
        label: '王五',
        data: [82, 79, 83, 81, 85],
        borderColor: '#fa8c16',
        backgroundColor: 'rgba(250, 140, 22, 0.1)',
        tension: 0.4
      }
    ]
  },
  options: {
    responsive: true,
    interaction: {
      mode: 'index',
      intersect: false
    },
    plugins: {
      legend: {
        position: 'top',
        labels: {
          usePointStyle: true,
          padding: 20
        }
      }
    },
    scales: {
      y: {
        beginAtZero: true,
        max: 100
      }
    }
  }
};
```

### 3.3 饼图（Pie Chart）

#### 使用场景
- **成绩分布**：展示优良中差的比例
- **时间分配**：显示学习时间在各学科的分布
- **答题情况**：正确率、错误率分布
- **参与度**：不同活动的参与比例

#### 设计规范
```scss
.pie-chart {
  // 扇形样式
  .slice {
    stroke: #fff;
    stroke-width: 2px;
    
    &:hover {
      stroke-width: 3px;
      cursor: pointer;
    }
  }
  
  // 标签
  .label {
    font-size: 12px;
    fill: #666;
    text-anchor: middle;
    
    &.percentage {
      font-weight: 600;
      font-size: 14px;
    }
  }
  
  // 引导线
  .leader-line {
    stroke: #999;
    stroke-width: 1px;
    fill: none;
  }
}
```

#### 环形图变体
```javascript
// 环形图配置
const doughnutConfig = {
  type: 'doughnut',
  data: {
    labels: ['优秀', '良好', '一般', '较差'],
    datasets: [{
      data: [25, 35, 30, 10],
      backgroundColor: [
        '#52c41a', // 优秀 - 绿色
        '#1890ff', // 良好 - 蓝色
        '#fa8c16', // 一般 - 橙色
        '#ff4d4f'  // 较差 - 红色
      ],
      borderWidth: 2,
      borderColor: '#fff',
      hoverBorderWidth: 3
    }]
  },
  options: {
    responsive: true,
    cutout: '60%',
    plugins: {
      legend: {
        position: 'right',
        labels: {
          padding: 20,
          usePointStyle: true
        }
      },
      tooltip: {
        callbacks: {
          label: function(context) {
            const label = context.label || '';
            const value = context.parsed;
            const total = context.dataset.data.reduce((a, b) => a + b, 0);
            const percentage = ((value / total) * 100).toFixed(1);
            return `${label}: ${value}人 (${percentage}%)`;
          }
        }
      }
    }
  }
};
```

### 3.4 雷达图（Radar Chart）

#### 使用场景
- **能力评估**：展示学生在各个维度的能力
- **学科平衡**：显示各学科发展的均衡性
- **综合素质**：多维度素质评价
- **对比分析**：多个学生的能力对比

#### 设计规范
```scss
.radar-chart {
  // 网格
  .grid {
    .web {
      stroke: #f0f0f0;
      stroke-width: 1px;
      fill: none;
    }
    
    .axis {
      stroke: #d9d9d9;
      stroke-width: 1px;
    }
  }
  
  // 数据区域
  .area {
    fill: rgba(24, 144, 255, 0.2);
    stroke: $primary-blue;
    stroke-width: 2px;
  }
  
  // 数据点
  .dot {
    fill: $primary-blue;
    stroke: #fff;
    stroke-width: 2px;
    r: 4px;
  }
  
  // 标签
  .label {
    font-size: 12px;
    fill: #666;
    text-anchor: middle;
  }
}
```

#### 多维度对比
```javascript
// 雷达图配置
const radarConfig = {
  type: 'radar',
  data: {
    labels: ['语言理解', '数学运算', '逻辑推理', '空间想象', '记忆能力', '创新思维'],
    datasets: [
      {
        label: '张三',
        data: [85, 90, 78, 82, 88, 75],
        borderColor: '#1890ff',
        backgroundColor: 'rgba(24, 144, 255, 0.2)',
        pointBackgroundColor: '#1890ff',
        pointBorderColor: '#fff',
        pointBorderWidth: 2
      },
      {
        label: '班级平均',
        data: [80, 85, 75, 78, 82, 70],
        borderColor: '#52c41a',
        backgroundColor: 'rgba(82, 196, 26, 0.1)',
        pointBackgroundColor: '#52c41a',
        pointBorderColor: '#fff',
        pointBorderWidth: 2
      }
    ]
  },
  options: {
    responsive: true,
    scales: {
      r: {
        beginAtZero: true,
        max: 100,
        grid: {
          color: '#f0f0f0'
        },
        angleLines: {
          color: '#d9d9d9'
        },
        pointLabels: {
          font: {
            size: 12
          },
          color: '#666'
        },
        ticks: {
          display: false
        }
      }
    },
    plugins: {
      legend: {
        position: 'top'
      }
    }
  }
};
```

### 3.5 散点图（Scatter Chart）

#### 使用场景
- **相关性分析**：分析两个变量之间的关系
- **异常检测**：识别异常数据点
- **分布分析**：观察数据的分布模式
- **聚类分析**：发现数据的聚集模式

#### 设计规范
```javascript
// 散点图配置
const scatterConfig = {
  type: 'scatter',
  data: {
    datasets: [{
      label: '学习时间 vs 成绩',
      data: [
        {x: 2, y: 65},
        {x: 3, y: 72},
        {x: 4, y: 78},
        {x: 5, y: 85},
        {x: 6, y: 88},
        {x: 7, y: 92}
      ],
      backgroundColor: 'rgba(24, 144, 255, 0.6)',
      borderColor: '#1890ff',
      borderWidth: 1,
      pointRadius: 6,
      pointHoverRadius: 8
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: {
        display: false
      },
      tooltip: {
        callbacks: {
          label: function(context) {
            return `学习时间: ${context.parsed.x}小时, 成绩: ${context.parsed.y}分`;
          }
        }
      }
    },
    scales: {
      x: {
        type: 'linear',
        position: 'bottom',
        title: {
          display: true,
          text: '学习时间（小时）'
        }
      },
      y: {
        title: {
          display: true,
          text: '成绩（分）'
        }
      }
    }
  }
};
```

### 3.6 热力图（Heatmap）

#### 使用场景
- **知识点掌握**：展示各知识点的掌握程度
- **时间分布**：显示学习活动的时间分布
- **相关性矩阵**：展示多个变量之间的相关性
- **地理分布**：显示地理位置相关的数据

#### 设计规范
```scss
.heatmap {
  // 单元格
  .cell {
    stroke: #fff;
    stroke-width: 1px;
    
    &:hover {
      stroke: #1890ff;
      stroke-width: 2px;
      cursor: pointer;
    }
  }
  
  // 标签
  .label {
    font-size: 12px;
    fill: #666;
    text-anchor: middle;
    dominant-baseline: central;
  }
  
  // 图例
  .legend {
    .gradient {
      stroke: none;
    }
    
    .tick {
      font-size: 10px;
      fill: #666;
    }
  }
}
```

## 4. 仪表板设计

### 4.1 布局原则

#### 信息层次
```scss
.dashboard {
  // 主要指标区域
  .primary-metrics {
    grid-area: primary;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
  }
  
  // 次要图表区域
  .secondary-charts {
    grid-area: secondary;
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1rem;
    margin-bottom: 2rem;
  }
  
  // 详细数据区域
  .detailed-data {
    grid-area: detailed;
  }
}
```

#### 响应式布局
```scss
.dashboard {
  display: grid;
  gap: 1rem;
  padding: 1rem;
  
  // 桌面端布局
  @media (min-width: 1200px) {
    grid-template-areas:
      "primary primary primary"
      "secondary secondary sidebar"
      "detailed detailed sidebar";
    grid-template-columns: 1fr 1fr 300px;
  }
  
  // 平板端布局
  @media (min-width: 768px) and (max-width: 1199px) {
    grid-template-areas:
      "primary primary"
      "secondary sidebar"
      "detailed detailed";
    grid-template-columns: 2fr 1fr;
  }
  
  // 移动端布局
  @media (max-width: 767px) {
    grid-template-areas:
      "primary"
      "secondary"
      "detailed"
      "sidebar";
    grid-template-columns: 1fr;
  }
}
```

### 4.2 关键指标卡片

#### 设计规范
```scss
.metric-card {
  background: #fff;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border: 1px solid #f0f0f0;
  transition: all 0.3s ease;
  
  &:hover {
    box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    transform: translateY(-2px);
  }
  
  .metric-header {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
    
    .metric-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      
      &.success {
        background: rgba(82, 196, 26, 0.1);
        color: #52c41a;
      }
      
      &.warning {
        background: rgba(250, 140, 22, 0.1);
        color: #fa8c16;
      }
      
      &.error {
        background: rgba(255, 77, 79, 0.1);
        color: #ff4d4f;
      }
    }
    
    .metric-title {
      font-size: 14px;
      color: #666;
      margin: 0;
    }
  }
  
  .metric-value {
    font-size: 2rem;
    font-weight: 600;
    color: #262626;
    margin-bottom: 0.5rem;
    
    .unit {
      font-size: 1rem;
      color: #999;
      margin-left: 0.25rem;
    }
  }
  
  .metric-trend {
    display: flex;
    align-items: center;
    font-size: 12px;
    
    .trend-icon {
      margin-right: 0.25rem;
    }
    
    &.up {
      color: #52c41a;
    }
    
    &.down {
      color: #ff4d4f;
    }
    
    &.stable {
      color: #1890ff;
    }
  }
}
```

#### 指标卡片组件
```javascript
// 指标卡片组件
const MetricCard = ({ title, value, unit, trend, icon, type }) => {
  return (
    <div className="metric-card">
      <div className="metric-header">
        <div className={`metric-icon ${type}`}>
          <i className={icon}></i>
        </div>
        <h3 className="metric-title">{title}</h3>
      </div>
      <div className="metric-value">
        {value}
        {unit && <span className="unit">{unit}</span>}
      </div>
      {trend && (
        <div className={`metric-trend ${trend.direction}`}>
          <i className={`trend-icon ${trend.icon}`}></i>
          <span>{trend.text}</span>
        </div>
      )}
    </div>
  );
};

// 使用示例
const dashboardMetrics = [
  {
    title: '班级平均分',
    value: 85.6,
    unit: '分',
    trend: {
      direction: 'up',
      icon: 'arrow-up',
      text: '比上次提高 3.2分'
    },
    icon: 'chart-line',
    type: 'success'
  },
  {
    title: '及格率',
    value: 92.5,
    unit: '%',
    trend: {
      direction: 'up',
      icon: 'arrow-up',
      text: '比上次提高 5%'
    },
    icon: 'check-circle',
    type: 'success'
  },
  {
    title: '需要关注',
    value: 3,
    unit: '人',
    trend: {
      direction: 'down',
      icon: 'arrow-down',
      text: '比上次减少 2人'
    },
    icon: 'exclamation-triangle',
    type: 'warning'
  }
];
```

### 4.3 图表容器

#### 统一容器样式
```scss
.chart-container {
  background: #fff;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  border: 1px solid #f0f0f0;
  
  .chart-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid #f0f0f0;
    
    .chart-title {
      font-size: 16px;
      font-weight: 600;
      color: #262626;
      margin: 0;
    }
    
    .chart-actions {
      display: flex;
      gap: 0.5rem;
      
      .action-btn {
        padding: 0.25rem 0.5rem;
        border: 1px solid #d9d9d9;
        border-radius: 4px;
        background: #fff;
        color: #666;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.2s ease;
        
        &:hover {
          border-color: #1890ff;
          color: #1890ff;
        }
        
        &.active {
          background: #1890ff;
          border-color: #1890ff;
          color: #fff;
        }
      }
    }
  }
  
  .chart-content {
    position: relative;
    height: 300px;
    
    &.large {
      height: 400px;
    }
    
    &.small {
      height: 200px;
    }
  }
  
  .chart-footer {
    margin-top: 1rem;
    padding-top: 1rem;
    border-top: 1px solid #f0f0f0;
    font-size: 12px;
    color: #999;
    text-align: center;
  }
}
```

### 4.4 数据表格

#### 表格样式
```scss
.data-table {
  width: 100%;
  border-collapse: collapse;
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  
  thead {
    background: #fafafa;
    
    th {
      padding: 1rem;
      text-align: left;
      font-weight: 600;
      color: #262626;
      border-bottom: 1px solid #f0f0f0;
      
      &.sortable {
        cursor: pointer;
        user-select: none;
        
        &:hover {
          background: #f5f5f5;
        }
        
        .sort-icon {
          margin-left: 0.5rem;
          opacity: 0.5;
          
          &.active {
            opacity: 1;
            color: #1890ff;
          }
        }
      }
    }
  }
  
  tbody {
    tr {
      transition: background-color 0.2s ease;
      
      &:hover {
        background: #fafafa;
      }
      
      &:nth-child(even) {
        background: #fafafa;
      }
      
      &.highlighted {
        background: #e6f7ff;
      }
    }
    
    td {
      padding: 1rem;
      border-bottom: 1px solid #f0f0f0;
      color: #595959;
      
      &.number {
        text-align: right;
        font-variant-numeric: tabular-nums;
      }
      
      &.status {
        .status-badge {
          padding: 0.25rem 0.5rem;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 500;
          
          &.success {
            background: rgba(82, 196, 26, 0.1);
            color: #52c41a;
          }
          
          &.warning {
            background: rgba(250, 140, 22, 0.1);
            color: #fa8c16;
          }
          
          &.error {
            background: rgba(255, 77, 79, 0.1);
            color: #ff4d4f;
          }
        }
      }
    }
  }
}
```

## 5. 交互设计

### 5.1 悬停效果

#### 图表悬停
```scss
// 悬停高亮
.chart-element {
  transition: all 0.2s ease;
  
  &:hover {
    opacity: 0.8;
    transform: scale(1.05);
    cursor: pointer;
  }
}

// 工具提示
.tooltip {
  position: absolute;
  background: rgba(0,0,0,0.8);
  color: #fff;
  padding: 0.5rem 0.75rem;
  border-radius: 4px;
  font-size: 12px;
  pointer-events: none;
  z-index: 1000;
  
  &::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: rgba(0,0,0,0.8) transparent transparent transparent;
  }
}
```

### 5.2 点击交互

#### 数据钻取
```javascript
// 图表点击事件
const handleChartClick = (event, elements) => {
  if (elements.length > 0) {
    const element = elements[0];
    const dataIndex = element.index;
    const datasetIndex = element.datasetIndex;
    
    // 获取点击的数据
    const clickedData = chart.data.datasets[datasetIndex].data[dataIndex];
    
    // 执行钻取操作
    drillDown(clickedData);
  }
};

// 钻取函数
const drillDown = (data) => {
  // 显示详细数据
  showDetailModal(data);
  
  // 或者导航到详细页面
  // navigate(`/detail/${data.id}`);
};
```

### 5.3 筛选和搜索

#### 筛选器设计
```scss
.filter-panel {
  background: #fff;
  border-radius: 8px;
  padding: 1rem;
  margin-bottom: 1rem;
  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  
  .filter-group {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1rem;
    
    &:last-child {
      margin-bottom: 0;
    }
    
    .filter-label {
      min-width: 80px;
      font-weight: 500;
      color: #262626;
    }
    
    .filter-control {
      flex: 1;
      max-width: 200px;
    }
  }
  
  .filter-actions {
    display: flex;
    gap: 0.5rem;
    justify-content: flex-end;
    
    .btn {
      padding: 0.5rem 1rem;
      border-radius: 4px;
      border: 1px solid #d9d9d9;
      background: #fff;
      cursor: pointer;
      transition: all 0.2s ease;
      
      &.primary {
        background: #1890ff;
        border-color: #1890ff;
        color: #fff;
        
        &:hover {
          background: #40a9ff;
        }
      }
      
      &:hover {
        border-color: #1890ff;
        color: #1890ff;
      }
    }
  }
}
```

## 6. 性能优化

### 6.1 数据加载

#### 懒加载策略
```javascript
// 图表懒加载
const LazyChart = ({ chartType, data, options }) => {
  const [isVisible, setIsVisible] = useState(false);
  const chartRef = useRef();
  
  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.disconnect();
        }
      },
      { threshold: 0.1 }
    );
    
    if (chartRef.current) {
      observer.observe(chartRef.current);
    }
    
    return () => observer.disconnect();
  }, []);
  
  return (
    <div ref={chartRef} className="chart-container">
      {isVisible ? (
        <Chart type={chartType} data={data} options={options} />
      ) : (
        <div className="chart-placeholder">
          <div className="loading-spinner">加载中...</div>
        </div>
      )}
    </div>
  );
};
```

#### 数据分页
```javascript
// 大数据集分页处理
const usePaginatedData = (data, pageSize = 50) => {
  const [currentPage, setCurrentPage] = useState(1);
  
  const paginatedData = useMemo(() => {
    const startIndex = (currentPage - 1) * pageSize;
    const endIndex = startIndex + pageSize;
    return data.slice(startIndex, endIndex);
  }, [data, currentPage, pageSize]);
  
  const totalPages = Math.ceil(data.length / pageSize);
  
  return {
    data: paginatedData,
    currentPage,
    totalPages,
    setCurrentPage
  };
};
```

### 6.2 渲染优化

#### 虚拟滚动
```javascript
// 虚拟滚动表格
const VirtualTable = ({ data, rowHeight = 50, containerHeight = 400 }) => {
  const [scrollTop, setScrollTop] = useState(0);
  
  const visibleStart = Math.floor(scrollTop / rowHeight);
  const visibleEnd = Math.min(
    visibleStart + Math.ceil(containerHeight / rowHeight),
    data.length
  );
  
  const visibleData = data.slice(visibleStart, visibleEnd);
  
  return (
    <div 
      className="virtual-table-container"
      style={{ height: containerHeight, overflow: 'auto' }}
      onScroll={(e) => setScrollTop(e.target.scrollTop)}
    >
      <div style={{ height: data.length * rowHeight, position: 'relative' }}>
        <div 
          style={{ 
            transform: `translateY(${visibleStart * rowHeight}px)`,
            position: 'absolute',
            top: 0,
            left: 0,
            right: 0
          }}
        >
          {visibleData.map((row, index) => (
            <TableRow 
              key={visibleStart + index} 
              data={row} 
              style={{ height: rowHeight }}
            />
          ))}
        </div>
      </div>
    </div>
  );
};
```

### 6.3 缓存策略

#### 图表缓存
```javascript
// 图表数据缓存
const useChartCache = () => {
  const cache = useRef(new Map());
  
  const getCachedChart = (key) => {
    return cache.current.get(key);
  };
  
  const setCachedChart = (key, chartData) => {
    cache.current.set(key, {
      data: chartData,
      timestamp: Date.now()
    });
  };
  
  const isCacheValid = (key, maxAge = 5 * 60 * 1000) => {
    const cached = cache.current.get(key);
    if (!cached) return false;
    
    return Date.now() - cached.timestamp < maxAge;
  };
  
  return {
    getCachedChart,
    setCachedChart,
    isCacheValid
  };
};
```

## 7. 无障碍设计

### 7.1 颜色无障碍

#### 色盲友好设计
```scss
// 色盲友好色板
.colorblind-friendly {
  // 使用形状和纹理辅助颜色
  .data-point {
    &.category-1 {
      background: #0173b2;
      border-radius: 50%; // 圆形
    }
    
    &.category-2 {
      background: #de8f05;
      clip-path: polygon(50% 0%, 0% 100%, 100% 100%); // 三角形
    }
    
    &.category-3 {
      background: #029e73;
      border-radius: 0; // 方形
    }
  }
}
```

### 7.2 键盘导航

#### 焦点管理
```scss
// 焦点样式
.chart-element {
  &:focus {
    outline: 2px solid #1890ff;
    outline-offset: 2px;
  }
  
  &:focus-visible {
    outline: 2px solid #1890ff;
    outline-offset: 2px;
  }
}

// 跳过链接
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: #1890ff;
  color: white;
  padding: 8px;
  text-decoration: none;
  border-radius: 4px;
  
  &:focus {
    top: 6px;
  }
}
```

### 7.3 屏幕阅读器支持

#### ARIA标签
```html
<!-- 图表容器 -->
<div 
  role="img" 
  aria-labelledby="chart-title" 
  aria-describedby="chart-description"
  class="chart-container"
>
  <h3 id="chart-title">班级成绩分布图</h3>
  <p id="chart-description">
    该柱状图显示了班级学生在不同分数段的分布情况。
    90-100分有8人，80-89分有15人，70-79分有10人，60-69分有5人，60分以下有2人。
  </p>
  <canvas id="chart-canvas"></canvas>
  
  <!-- 数据表格作为备选 -->
  <table class="sr-only" aria-label="成绩分布数据表">
    <thead>
      <tr>
        <th>分数段</th>
        <th>人数</th>
        <th>百分比</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>90-100分</td>
        <td>8人</td>
        <td>20%</td>
      </tr>
      <!-- 更多行... -->
    </tbody>
  </table>
</div>
```

## 8. 测试和验证

### 8.1 视觉测试

#### 对比度检查
```javascript
// 对比度计算函数
const calculateContrast = (color1, color2) => {
  const getLuminance = (color) => {
    const rgb = hexToRgb(color);
    const [r, g, b] = rgb.map(c => {
      c = c / 255;
      return c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);
    });
    return 0.2126 * r + 0.7152 * g + 0.0722 * b;
  };
  
  const l1 = getLuminance(color1);
  const l2 = getLuminance(color2);
  const lighter = Math.max(l1, l2);
  const darker = Math.min(l1, l2);
  
  return (lighter + 0.05) / (darker + 0.05);
};

// 检查颜色组合
const checkColorCombinations = (colors) => {
  const results = [];
  
  for (let i = 0; i < colors.length; i++) {
    for (let j = i + 1; j < colors.length; j++) {
      const contrast = calculateContrast(colors[i], colors[j]);
      results.push({
        color1: colors[i],
        color2: colors[j],
        contrast: contrast,
        passAA: contrast >= 4.5,
        passAAA: contrast >= 7
      });
    }
  }
  
  return results;
};
```

### 8.2 性能测试

#### 渲染性能监控
```javascript
// 性能监控
const performanceMonitor = {
  startTime: null,
  
  start() {
    this.startTime = performance.now();
  },
  
  end(label) {
    const endTime = performance.now();
    const duration = endTime - this.startTime;
    console.log(`${label}: ${duration.toFixed(2)}ms`);
    
    // 发送性能数据到监控系统
    if (duration > 100) {
      console.warn(`Slow rendering detected: ${label} took ${duration.toFixed(2)}ms`);
    }
  }
};

// 使用示例
performanceMonitor.start();
renderChart(data);
performanceMonitor.end('Chart Rendering');
```

### 8.3 用户测试

#### A/B测试框架
```javascript
// A/B测试配置
const abTestConfig = {
  chartColorScheme: {
    variants: ['blue-theme', 'green-theme', 'multi-color'],
    weights: [0.4, 0.3, 0.3]
  },
  dashboardLayout: {
    variants: ['grid-layout', 'card-layout'],
    weights: [0.5, 0.5]
  }
};

// 获取用户变体
const getUserVariant = (testName, userId) => {
  const test = abTestConfig[testName];
  if (!test) return test.variants[0];
  
  // 基于用户ID的一致性哈希
  const hash = simpleHash(userId + testName);
  const random = (hash % 100) / 100;
  
  let cumulative = 0;
  for (let i = 0; i < test.variants.length; i++) {
    cumulative += test.weights[i];
    if (random < cumulative) {
      return test.variants[i];
    }
  }
  
  return test.variants[0];
};
```

---

本数据可视化设计规范为智能教学助手提供了全面的数据展示设计标准，确保数据能够清晰、准确、美观地传达给用户，支持教育决策和学习改进。